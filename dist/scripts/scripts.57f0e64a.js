(function(){"use strict";var a;a=angular.module("testFrontEndApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]),a.config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/index.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/user",{templateUrl:"views/user.html",controller:"UserCtrl"}).when("/top",{templateUrl:"views/top.html",controller:"TopCtrl"}).when("/myTop",{templateUrl:"views/mytop.html",controller:"MyTopCtrl"}).when("/admin",{templateUrl:"views/admin.html",controller:"AdminCtrl"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/userInfo",{templateUrl:"views/userinfo.html",controller:"UserinfoCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/userTop/:idUser",{templateUrl:"views/usertop.html",controller:"UsertopCtrl"}).when("/categories",{templateUrl:"views/categories.html",controller:"CategoriesCtrl"}).when("/details",{templateUrl:"views/details.html",controller:"DetailsCtrl"}).otherwise({redirectTo:"/"})}]),a.config(["$httpProvider",function(a){return a.interceptors.push(["$window","$q","$location",function(a,b,c){return{request:function(c){return c.headers=c.headers||{},a.sessionStorage.getItem("token")&&(c.headers["X-User-Token"]=a.sessionStorage.getItem("token"),c.headers["X-User-Email"]=a.sessionStorage.getItem("email")),c||b.when(c)},response:function(a){return 401===a.status&&c.path("/"),a||b.when(a)}}}])}])}).call(this),function(){"use strict";var a;a=angular.module("testFrontEndApp"),a.controller("MainCtrl",["$scope","$location","$window","serviceAjax",function(a,b,c,d){return a.username=c.sessionStorage.getItem("name"),a.email=c.sessionStorage.getItem("email"),a.isLogged=c.sessionStorage.getItem("isLogin"),console.log("main",a.username,c.sessionStorage.getItem("isLogin",a.isLogged)),a.tops=[],a.$on("userLogged",function(b,c){return console.log("userLogged"),a.username=c.username,a.email=c.email,a.isLogged=c.isLoggin}),d.getAllTop().success(function(b,c){a.tops=b||[],a.i=1,a.tops.length>0?a.noTop=!1:a.noTop=!0}).error(function(b){console.log(b),a.noTop=!0})}])}.call(this),function(){"use strict";angular.module("testFrontEndApp").controller("AboutCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";var a;a=angular.module("testFrontEndApp"),a.controller("UserCtrl",["$scope","$location","$window","serviceAjax",function(a,b,c,d){return a.erreur=!1,a.isLogin=c.sessionStorage.getItem("isLogin"),a.register=function(){a.jsonRegister={user:{email:a.email,password:a.password,password_confirmation:a.password,name:a.pseudo}},d.register(a.jsonRegister).success(function(a,d){c.sessionStorage.setItem("id",a.id),c.sessionStorage.setItem("token",a.authentication_token),c.sessionStorage.setItem("email",a.email),c.sessionStorage.setItem("name",a.name),b.path("/login")}).error(function(b,c){return a.erreur=!0,a.erreurMsg=b})}}]),a.directive("equalsTo",[function(){return{restrict:"A",scope:!0,require:"ngModel",link:function(a,b,c,d){var e;e=function(){var b,d;return b=a.$eval(c.ngModel),d=a.$eval(c.equalsTo).$viewValue,b===d},a.$watch(e,function(a){d.$setValidity("equalsTo",a)})}}}])}.call(this),function(){"use strict";angular.module("testFrontEndApp").factory("serviceAjax",["$http","$q",function(a,b){return{login:function(b){return a.post("http://toppyshare-backend.herokuapp.com/api/sessions",b)},register:function(b){return a.post("http://toppyshare-backend.herokuapp.com/api/users",b)},getUserInfo:function(){return a.get("http://toppyshare-backend.herokuapp.com/api/users")},updateUser:function(b){return a.put("http://toppyshare-backend.herokuapp.com/api/users",b)},createTop:function(b){return a.post("http://toppyshare-backend.herokuapp.com/api/tops",b)},updateTop:function(b,c){return a.post("http://toppyshare-backend.herokuapp.com/api/tops/"+c,b)},getAllTop:function(){return a.get("http://toppyshare-backend.herokuapp.com/api/tops")},getOneTop:function(b){return a.get("http://toppyshare-backend.herokuapp.com/api/tops/"+b)},deleteTop:function(b){return a["delete"]("http://toppyshare-backend.herokuapp.com/api/tops/"+b)},getAllTopDateFilter:function(b,c){return a.get("http://toppyshare-backend.herokuapp.com/api/tops?filters[start_date]="+b+"&filters[end_date]="+c)},getAllTopUser:function(b){return a.get("http://toppyshare-backend.herokuapp.com/api/tops?filters[user_id]="+b)},forked:function(b){return a.post("http://toppyshare-backend.herokuapp.com/api/tops",b)},followUser:function(b){return a.post("http://toppyshare-backend.herokuapp.com/api/followings",b)},getAllFollowerCurrentUser:function(){return a.get("http://toppyshare-backend.herokuapp.com/api/followings")},getAllFollowerOfUser:function(){return a.get("http://toppyshare-backend.herokuapp.com/api/followers")},getCategories:function(){return a.get("http://toppyshare-backend.herokuapp.com/api/categories")}}}])}.call(this),function(){"use strict";var a;a=angular.module("testFrontEndApp"),a.controller("TopCtrl",["$scope","serviceAjax",function(a,b){return a.erreur=!1,a.saved=!1,a.category=!1,a.names=[{val:"bob"},{val:"lucy"},{val:"john"},{val:"luke"},{val:"han"}],a.tops=[],a.tempo="",a.add=function(){return""!==a.tempo?(a.tops.push({title:a.tempo}),a.tempo=""):void 0},a.enregistrer=function(){return a.debJson={top:{title:"",tags:'["#evasion"]',category:"voyage",items:""}},a.debJson.top.title=a.title,a.debJson.top.items=a.tops,b.createTop(a.debJson).success(function(b,c){console.log("success",b,c),b.success===!0&&(a.saved=!0)}).error(function(b,c){console.log(c),a.erreur=!0,a.erreurMsg=b.error||b.info,a.saved=!1})},a.checkForNameDelete=function(b){return""===a.tops[b].title?a.tops.splice(b,1):void 0},a.removeCurrentItem=function(b){return a.tops[b].title="",a.checkForNameDelete(b)},b.getCategories().success(function(b,c){a.categories=b||[],console.log(a.categories)}).error(function(a){})}])}.call(this),function(){"use strict";var a;a=angular.module("testFrontEndApp"),a.controller("MyTopCtrl",["$scope","$window","$cookies","serviceAjax",function(a,b,c,d){var e;e=b.sessionStorage.getItem("id"),d.getAllTopUser(e).success(function(b,c){a.myTops=b||[],a.i=1,a.myTops.length>0?a.noTop=!1:a.noTop=!0}).error(function(b){console.log(b),a.noTop=!0}),d.getAllFollowerCurrentUser().success(function(b,c){return a.userFav=b||[],a.userFav.length>0?a.noUser=!1:a.noUser=!0}).error(function(b){console.log(b),a.noUser=!0}),d.getAllFollowerOfUser().success(function(b,c){return a.myFollowers=b||[],a.myFollowers.length>0?a.notFollow=!1:a.notFollow=!0}).error(function(b){console.log(b),a.notFollow=!0,void 0===c.authenticated&&(window.location="/#/login")})}])}.call(this),function(){"use strict";angular.module("testFrontEndApp").controller("AdminCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";var a;a=angular.module("testFrontEndApp"),a.controller("LoginCtrl",["$scope","$location","$window","$cookies","serviceAjax",function(a,b,c,d,e){return a.erreur=!1,a.isLogin=!1,a.seConnecter=function(){return a.jsonLogin={user:{email:a.email,password:a.password}},e.login(a.jsonLogin).success(function(e,f){return c.sessionStorage.setItem("id",e.user.id),c.sessionStorage.setItem("token",e.user.authentication_token),c.sessionStorage.setItem("email",e.user.email),c.sessionStorage.setItem("isLogin",!0),c.sessionStorage.setItem("name",e.user.name),a.$root.$broadcast("userLogged",{username:e.user.name,email:e.user.email,isLogin:!0}),d.authenticated="1",console.log(e.user.name,c.sessionStorage.getItem("name")),b.path("/")}).error(function(b){return c.sessionStorage.removeItem("id"),c.sessionStorage.removeItem("token"),c.sessionStorage.removeItem("email"),d.authenticated=void 0,c.sessionStorage.getItem("isLogin")?a.isLogin=!0:a.erreur=!0})}}])}.call(this),function(){"use strict";var a;a=angular.module("testFrontEndApp"),a.controller("UserinfoCtrl",["$scope","serviceAjax","$window","$location",function(a,b,c,d){return b.getUserInfo().success(function(b,c){return a.info=b}).error(function(b){return a.error=!0,a.erreurInfo=b.error}),a.updateInfo=function(){return b.updateUser(a.info).success(function(a,b){return console.log(b),d.path("/")}).error(function(a){return console.log(a)})}}])}.call(this),function(){"use strict";var a;a=angular.module("testFrontEndApp"),a.controller("UsertopCtrl",["$scope","$routeParams","$window","serviceAjax",function(a,b,c,d){var e;return e=b.idUser,d.getAllTopUser(e).success(function(b,c){return a.myTops=b,a.myTops?a.noTop=!1:a.noTop=!0}).error(function(a){return console.log(a)}),d.getAllFollowerCurrentUser(e).success(function(b,c){return a.userFav=b,a.userFav?a.noUser=!1:a.noUser=!0}).error(function(a){return console.log(a)}),d.getAllFollowerOfUser().success(function(b,c){return a.myFollowers=b,a.myFollowers?a.notFollow=!1:a.notFollow=!0}).error(function(a){return console.log(a)})}]),$(function(){$(".list-group-item").on("mouseover",function(a){a.preventDefault(),$(this).closest("li").addClass("open")}),$(".list-group-item").on("mouseout",function(a){a.preventDefault(),$(this).closest("li").removeClass("open")})})}.call(this),function(){"use strict";angular.module("testFrontEndApp").controller("CategoriesCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this),function(){"use strict";angular.module("testFrontEndApp").controller("DetailsCtrl",["$scope",function(a){return a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}])}.call(this);